---
import type { TargetContent } from "../../src";
import FeelbackLoader from "./FeelbackLoader.astro";

type Props = TargetContent & {
  revokable?: boolean;
  showCount?: boolean;
  textQuestion?: string;
  textAnswer?: string;
};

const { revokable, showCount, textQuestion, textAnswer, ...target } = Astro.props;

const config = {
  revokable,
  showCount,
  behavior: "switch",
  ...("contentSetId" in target
    ? {
        contentSetId: target.contentSetId,
        key: target.key,
      }
    : {
        contentId: target.contentId,
      }),
};
---

<FeelbackLoader />

<div class="feelback-container" data-feelback={JSON.stringify(config)}>
  <div class="feelback-q">
    {textQuestion && <span class="feelback-text">{textQuestion}</span>}
    <slot />
  </div>
  {
    textAnswer && (
      <div class="feelback-a">
        <span class="feelback-text">{textAnswer}</span>
      </div>
    )
  }
</div>
